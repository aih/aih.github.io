---
layout: post
title: 'How to Convert Citations to Hyperlinks: CA Laws'
date: '2011-05-24T11:33:00.000-07:00'
author: Ari Hershowitz
tags:
- Metadata
- HTML
- legal technology
- technical post
- California Legislation
- text conversion
- legislation
modified_time: '2011-05-28T23:52:43.914-07:00'
blogger_id: tag:blogger.com,1999:blog-7029518648320057552.post-2490182025024874111
blogger_orig_url: https://blog.linkedlegislation.com/2011/05/how-to-convert-citations-to-hyperlinks.html
---

<div style="clear: both;">Steps 3 and 4 in <a href="https://blog.tabulaw.com/2011/05/california-laws-converting-plain-text.html" target="_blank" title="Post with overview of process">converting the California legal Codes to structured HTML</a> involve identifying references within the text (e.g. "pursuant to Section 480" or "under Section 15000 of the Vehicles Code"). This presents two challenges: (1) identifying the correct Code (the high level subject matter of the law), and (2) identifying the section in that Code.</div><div style="clear: both;">This becomes more complex than it would seem, because California's legislature uses a variety of different forms to refer to other Sections and Codes. The most straightforward is of the form, "Section X of the Y Code". But there are many, many variants. An example:</div><blockquote style="clear: both;">"pursuant to the provisions of Part 2.5 (commencing with Section 18901) of Division 13 of the Health and Safety Code"</blockquote><div style="clear: both;">To deal with these variations, I started by identifying all Code references. I used the Linux <a href="https://blog.tabulaw.com/2011/05/how-to-convert-sections-into-hyperlink.html" target="_blank" title="Earlier post on sed"><em>sed</em> utility</a> to do this and to enclose each Code reference with html tags. This is a simplified version of the RegEx for one Code:</div><blockquote style="clear: both;"><pre style="clear: both;">s_Health and Safety Code_&lt;a href="/Code-hsc"&gt;Health and Safety Code&lt;/a&gt;_</pre></blockquote><div style="clear: both;">To identify the Section number(s), I compiled a list of the most common forms of reference, and created a RegEx expression for each. There is an additional problem, though: many of the references contain many subreferences and cover more than one line of the text:</div><blockquote style="clear: both;">pursuant to Chapter 3.5 (commencing with Section<br />11340), Chapter 4 (commencing with Section 11370), or Chapter 5<br />(commencing with Section 11500), of Part 1 of Division 3 of Title 2<br />of the Government Code</blockquote><div style="clear: both;">Hmm. A worthy challenge. </div><div style="clear: both;">The Chapter, Part, Division and Title references do not seem to add any independent information for our purposes. So I look for, and skip over, anything of the form [Part OR Division OR Title] [number] of [Part OR Division OR Title]...</div><div style="clear: both;">Now we have:</div><blockquote style="clear: both;">Section<br />11340),...Section 11370),...<br />...Section 11500),...<br /><pre style="clear: both;">of the &lt;a href="/Code-gov"&gt;Government Code&lt;/a&gt;</pre><pre style="clear: both;"></pre></blockquote><div style="clear: both;">With the Code reference previously identified we can now focus on finding the various Section references, and associating them with the right Code. I go into a bit more technical detail on this after the fold and in the next post on how I put it all together to run through all of the Code sections (18k files; 50k <strike>files </strike>&nbsp;sections)&nbsp;in one sitting.</div><a name='more'></a>Dealing with multi-line references using the one-line-at-a-time editing method inherent to <em>sed</em> is beyond my (limited) ability to bend Linux to my will. Time to pull out a more modern (though slower) programming language.<br /><div style="clear: both;">I placed all of the RegEx to identify Section numbers into a Python script, using the <a href="https://docs.python.org/library/re.html" target="_blank" title="Regular Expressions for Python">re module</a> of Python. Though this allowed me to look many lines ahead to find the Code reference that goes with each Section reference, it has its downside. With <em>sed</em>, I was able to put together a sequence of more than a dozen RegEx expressions, and run them simultaneously, line-by-line on each file. That way, I only need to scan each file once. On the other hand, my Python script reads through the entire file for each and every kind of Section reference to perform its "find and replace" function. Not very efficient, but this may be a necessary evil to capture information that is spread across many lines of a file.</div><br class="final-break" style="clear: both;" />