---
layout: post
title: 'How to convert Text to HTML: Using txt2html Perl Module'
date: '2011-05-18T10:19:00.000-07:00'
author: Ari Hershowitz
tags:
- Metadata
- HTML
- Perl
- technical post
- California Legislation
modified_time: '2011-06-06T12:18:17.110-07:00'
blogger_id: tag:blogger.com,1999:blog-7029518648320057552.post-7583408706824048901
blogger_orig_url: https://blog.linkedlegislation.com/2011/05/how-to-convert-text-to-html-using.html
---

<div style="clear: both;">To convert CA statutes from text to html, I used the <a href="http://txt2html.sourceforge.net/" target="_blank" title="txt2html: Sourceforge link">txt2html</a> module, written in Perl by Kathryn Anderson. This was step 1 in the 5-step <a href="http://blog.tabulaw.com/2011/05/california-laws-converting-plain-text.html#fivestep" target="_blank" title="Post outlining 5-step processing of CA Laws">process</a> I used to reintroduce metadata to the statutes.</div><div style="clear: both;">While there are a number of free online text to html converters, and some commercial packages you can download, txt2html is a fast, flexible and accurate open source option. It also works from the command-line, so I could combine it with the next steps I needed, to identify section headings, etc.</div><div style="clear: both;">After installing the module on my Mac OS (described below), I used the following command, all in one line, from the Terminal:</div><blockquote style="clear: both;"><div>txt2html --explicitheadings --indentparbreak --maketables --make_anchors --xhtml --outfile /path/to/file.html /path/to/file</div></blockquote><div style="clear: both;"></div><div><div>What does this do? The "/path/to/file" needs to be substituted with the actual path to the text file you want to convert and "/path/to/file.html" is the name and path of the new document you want to create.</div><div>One of the advantages of this module for converting to html, is that it has a good assortment of options. I found that the ones above were needed in order to keep the structure of the text file in place. For example, without these options, some of the subdivisions of a statute got collapsed with earlier subdivisions into the same paragraph.</div></div><div style="clear: both;"></div><div>Here is a before and after of a section of the text:</div><div><br /></div><b>Before:</b><br /><blockquote style="clear: both;"><div style="clear: both;">15210. Notwithstanding any other provision of this code, as used in<br />this chapter, the following terms have the following meanings:<br />(a) "Commercial driver's license" means a driver's license issued<br />by a state or other jurisdiction, in accordance with the standards<br />contained in Part 383 of Title 49 of the Code of Federal Regulations,<br />which authorizes the licenseholder to operate a class or type of<br />commercial motor vehicle.<br />(b) (1) "Commercial motor vehicle" means any vehicle or</div></blockquote><b>After:</b><br /><blockquote style="clear: both;"><div style="clear: both;">&lt;p&gt;15210. Notwithstanding any other provision of this code, as used in this chapter, the following terms have the following meanings:<br />&lt;br/&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;(a) "Commercial driver's license" means a driver's license issued<br />by a state or other jurisdiction, in accordance with the standards <br />contained in Part 383 of Title 49 of the Code of Federal Regulations, which authorizes the licenseholder to operate a class or type of<br />commercial motor vehicle.<br />&lt;br/&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;(b) (1) "Commercial motor vehicle" means any vehicle or</div></blockquote><div style="clear: both;">This did everything I wanted, and nothing I didn't. Installation instructions after the fold.</div><a name='more'></a><br /><div style="clear: both;">Installing txt2html can be quite a challenge: it requires about a zillion other packages and each of them also have many prerequisites. (Google "txt2html install", and you'll see that I'm not the first to face this challenge.) The instructions <a href="http://txt2html.sourceforge.net/#install" target="_blank" title="txt2html Sourceforge page">here</a> tell you where to get the source code, and then say "Look out for the dependencies!"</div><div style="clear: both;">To deal with all of this, install Perl's package manager, cpanm. On MacOS X, cpan was already installed, so to install the more up to date version, I followed instructions <a href="http://www.cpan.org/modules/INSTALL.html" target="_blank" title="CPAN site">here</a> and ran the following, (with root privileges):</div><blockquote style="clear: both;"><div style="clear: both;">sudo cpan App::cpanminus</div></blockquote><div style="clear: both;">This results in about a dozen prompts whether you want to install various packages. So stay with it and just hit return for each (or follow the <a href="http://rackerhacker.com/2009/01/01/cpan-automatically-install-dependencies-without-confirmation/" target="_blank" title="How to install without prompts">instructions here</a> to silence these prompts).</div><div style="clear: both;">Next, run:</div><div style="clear: both;">sudo cpanm HTML::TextToHTML</div><div style="clear: both;">Now you should be able to convert any txt file to html using the command above, or minimally: </div><blockquote style="clear: both;"><div style="clear: both;">$ txt2html filename.txt &gt; filename.html</div></blockquote><br class="final-break" style="clear: both;" />