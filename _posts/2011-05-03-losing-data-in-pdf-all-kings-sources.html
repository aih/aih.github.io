---
layout: post
title: 'Losing Data in PDF: All the King''s Sources'
date: '2011-05-03T12:16:00.000-07:00'
author: Ari Hershowitz
tags:
- Judicial Branch
- Apache pdfBox
- Apache Tika
- Federal Register
- Code of Federal Regulations
- pdftotext
- pdftohtml
- XML
- text conversion
- Supreme Court
- pdf
- Google Documents
modified_time: '2015-12-01T08:49:48.071-08:00'
thumbnail: https://4.bp.blogspot.com/-8FW_lC_6vMY/TcBN7XFcbpI/AAAAAAAADoM/a4DIhxoIiCU/s72-c/ATT-TitlePage.png
blogger_id: tag:blogger.com,1999:blog-7029518648320057552.post-7741498901451191331
blogger_orig_url: https://blog.linkedlegislation.com/2011/05/losing-data-in-pdf-all-kings-sources.html
---

<div style="clear: both;">A quick exercise:</div><ol style="clear: both;"><li>Find the Supreme Court opinion in <em>AT&amp;T Mobility v. Concepcion</em>, (hint: look <a href="https://www.blogger.com/http%3A%2F%2Fwww.supremecourt.gov%2Fopinions%2F10pdf%2F09-893.pdf">here</a>), the recent case on contracts that block class action suits,</li><li>Find all of the (nearly 30) briefs that were submitted to the Court (hint: look <a href="https://www.americanbar.org/publications/preview_home/publiced_preview_briefs_nov2010.html#mobility">here</a>), and</li><li>Determine which arguments from the briefs were discussed in the Court opinion.</li></ol><div style="clear: both;">This kind of information -- which arguments attracted the Court's attention and how those arguments were treated -- is valuable to litigators going before the Court and to anyone interested in seeing how the Court arrives at its decisions. It's also the kind of project that should lend itself well to computerized analysis.</div><div style="clear: both;">While this exercise can certainly be done by brute force, by reading each brief and comparing it to the final Court decision, it should also be possible to use software to compare the text and sections of each brief with the final opinion. You can imagine a number of ways of doing this: compare documents at the individual word level, compare section titles, compare case references, etc. However, as soon as you set about to write a program to make these comparisons, you are confronted with a problem: the documents that are available from the Court website, or the American Bar Association (where the briefs are found), are all in Adobe pdf format. Not so bad, you think. These were originally electronic documents, not scanned images, so they were encoded in pdf with their text. Just extract the text and work from there. It turns out not to be that easy. When you scratch beneath the surface of a pdf, you see that it is mainly a graphic representation of the document. A great deal of the structure of the document is simply not encoded: sections, citations, paragraphs -- even the difference between footnotes and the main text -- are all gone.<br />You can see that by trying to convert a pdf to text or to web format (html). Google Documents has a nice feature that does this, and <a href="https://docs.google.com/document/d/1MSJLfPzMoUBMzu0RYDHrqGh9ljSgQjOhWQXdYEBzuG4/edit?hl=en">here</a> is Google's web-converted version of the opinion above (<em>AT&amp;T Mobility v. Concepcion</em>). The way that Google presents the converted document shows the original pdf image of each page, followed by the converted version. A few items jump out from the first page of converted text. Words that were divided at the end of a line in the original, e.g. 'uncon- scionable', are still broken even in the middle of the paragraph. Text formatting, such as italics for case citations, is gone, and formatting of some paragraphs has been significantly disrupted: the top paragraph on page 3 is right-justified in the Google Docs version. Even more problematic is the title section, where the names of the Supreme Court justices are broken up:<br /><div class="separator" style="clear: both; text-align: center;"><a class="image-link" href="https://4.bp.blogspot.com/-8FW_lC_6vMY/TcBN7XFcbpI/AAAAAAAADoM/a4DIhxoIiCU/s1600/ATT-TitlePage.png" style="margin-left: 1em; margin-right: 1em;"><img align="left" height="191" src="https://4.bp.blogspot.com/-8FW_lC_6vMY/TcBN7XFcbpI/AAAAAAAADoM/a4DIhxoIiCU/s320/ATT-TitlePage.png" style="display: inline; float: left; margin-bottom: 10px; margin-left: 0px; margin-right: 10px; margin-top: 0px;" width="320" /></a></div><br />Key information about the case--who joined which opinions--has been lost. This information can be recovered in a variety of ways, including by manually coding the vote of each justice in the case, but how wasteful, considering that all of that information was available in the original (electronic) version of the document. In fact, the original sets out the Justices names in all caps to set them apart visually:<br /><div class="separator" style="clear: both; text-align: center;"><a class="image-link" href="https://2.bp.blogspot.com/-zAQLAm0LNsU/TcBOQRDiraI/AAAAAAAADoU/xghdGxbwte0/s1600/Justices.png" style="margin-left: 1em; margin-right: 1em;"><img align="left" border="0" height="50" src="https://2.bp.blogspot.com/-zAQLAm0LNsU/TcBOQRDiraI/AAAAAAAADoU/xghdGxbwte0/s320/Justices.png" style="display: inline; float: left; margin-bottom: 10px; margin-left: 0px; margin-right: 10px; margin-top: 0px;" width="320" /></a></div><br />Ironically, the Court's extra effort to provide a distinctive visual layout that highlights the Justices' names actually breaks Google's algorithm for parsing the pdf text. With a little bit of forethought, the Court could preserve both the layout and the key structural information, to make their opinions more accessible to the general public, as well as to meet&nbsp;<a href="https://www.access-board.gov/guidelines-and-standards/communications-and-it/about-the-section-508-standards">Federal government accessibility standards</a>. (Though these standards are not directly binding on the courts--another sad irony.)<br />So, for now, we have the technical challenge of converting pdfs to structured text, which is tough enough. Google Documents misses many of the most important text features and in another post, I will discuss other (imperfect) options to do pdf to text conversions, including the <a href="https://foolabs.com/xpdf/download.html">pdftotext</a> and <a href="https://pdftohtml.sourceforge.net/">pdftohtm</a>l programs, and the open source Apache <a href="https://pdfbox.apache.org/">pdfBox</a> and <a href="https://tika.apache.org/">Tika</a> projects.<br />But for a lawyer, or anyone who cares about the "official" or binding version of the court opinion, the problem goes beyond the encoding of the pdf opinion that the court publishes on its website. As the Court website <a href="https://www.blogger.com/post-create.g?blogID=7029518648320057552">explains</a>, there are six different versions of opinions published by the Court.</div><blockquote style="clear: both;">Prior to the issuance of (1) bound volumes of the U.S. Reports, the Court's official decisions appear in three temporary printed forms: (2) bench opinions (which are transmitted electronically to subscribers over the Court's Project Hermes service); (3) slip opinions (which are posted on this website); and (4) preliminary prints.</blockquote><div style="clear: both;">In addition to these four forms, Court opinions are published (5) in pdf on the website and (6) in bound, printed volumes by a commercial publisher under contract with the Government printing office. So which one is the "official" version? The&nbsp;<a href="https://www.supremecourt.gov/opinions/info_opinions.aspx">print versions</a>: "Only the bound volumes of the United States Reports contain the final, official text of the opinions of the Supreme Court of the United States. In case of discrepancies between the bound volume and any other version of a case--whether print or electronic, official or unofficial--the bound volume controls."</div><div style="clear: both;">A variation on this policy can be found on the&nbsp;<a href="https://uscode.house.gov/about/info.shtml">U.S. House website</a>, describing the publication of Federal legislation, whose "official" version is the one printed by the Government Printing Office once each year. Considering that nearly all legal research is now done electronically, there is a serious disconnect here between actual practice and the policies of these two branches of Government.</div><div style="clear: both;">So, not only do the electronic versions of legal sources from the Court and Congress lose or scramble much of the original structural information, their official policies undermine the value of publishing in electronic form to begin with. In practice, what this means is that attorneys, and even the Court, ends up relying on one of the two major commercial databases, Westlaw and Lexis/Nexis for the electronic versions that they publish, after those companies input their own version of the documents' structure. As a result, the Court ends up subscribing to these commercial databases to get access back to its own original sources. What an odd state of affairs.</div><div style="clear: both;">The solution, technically simple, will take some political will, or some technical enlightenment from the Court: publish Court opinions in an official electronic format that&nbsp;<strong>includes&nbsp;</strong>important structural information. This could be as simple as publishing the document in a&nbsp;<a href="https://en.wikipedia.org/wiki/Portable_Document_Format#Logical_structure_and_accessibility">"tagged" pdf</a>&nbsp;format, or even better, to move toward a more "native" electronic format such as XML. The Executive Branch has done with the&nbsp;<a href="https://www.data.gov/raw/1325">Federal Register</a>&nbsp;(a report of all official government updates) and the&nbsp;<a href="https://www.data.gov/raw/1326/">Code of Federal Regulations</a>, which are now both published in XML. The&nbsp;<a href="https://blog.tabulaw.com/2011/04/congress-commits-to-e-data-formats.html">recent letter</a>&nbsp;from House Speaker Boehner and Majority Leader Cantor urging the House to publish legislation in XML moves things closer in that branch, as well.</div><div style="clear: both;">Any bets on how long it will take until all three branches are publishing in a native electronic format?</div><div style="clear: both;"></div><div style="clear: both;"></div><br class="final-break" style="clear: both;" />